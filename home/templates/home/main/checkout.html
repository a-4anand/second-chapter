{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Second Chapter - Buy & Sell Used BooksSecond Chapter - Buy & Sell Used Books{% endblock %}</title>

    <link rel="stylesheet" href="{% static 'assets/css/style.css' %}">

    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<style>
    h2 {
        font-size: 32px;
        margin-bottom: 30px;
        color: #333;
    }

    #rzp-button {
        background-color: #4CAF50;
        color: white;
        padding: 15px 40px;
        border: none;
        border-radius: 10px;
        font-size: 18px;
        cursor: pointer;
        transition: background 0.3s ease;
    }

    #rzp-button:hover {
        background-color: #45a049;
    }

    main {
       margin-top: 150px;
        padding: 40px 60px;
        border-radius: 20px;

        text-align: center;
    }
</style>
</head>
<body>
    <header>
        <div class="logo">
            <img src="{% static 'assets/img/logo.png' %}" alt="Second Chapter Logo">
        </div>

        <nav>
            <a href="{% url 'home' %}" style="text-decoration: none;">⬅ Back</a>

            <div class="nav-divider"></div>

            <a href="{% url 'home' %}">Home</a>
            <a href="{% url 'login' %}">Login</a>
            <a href="{% url 'register' %}">Register</a>

            <div class="nav-divider"></div>

            <a href="{% url 'buybooks' %}">Buy Books</a>
            <a href="{% url 'sellbooks' %}">Sell Books</a>
            <a href="#about">About</a>
            <a href="{% url 'contact' %}">Contact</a>

            <div class="nav-divider"></div>

            <a href="{% url 'profile' %}">View Profile</a>
            <a href="{% url 'cart' %}">Your Cart</a>
            <a href="#">Settings</a>
            <a href="{% url 'logout' %}">Logout</a>
        </nav>



    </header>

<main>
     <h2>Pay Now</h2>
    <button id="rzp-button">Pay ₹{{ total_price }}</button>
</main>



<section class="about-section" >
        <div class="about-container">
            <div class="about-text">
                <h2>About Second Chapter</h2>
                <p>Second Chapter is a Pune-based startup founded by Anand Dubey. This platform is created especially for bibliophiles who love to read but find it costly to buy new books frequently.</p>
                <p>We believe that a single use does not diminish a book's value. That’s why we buy and sell used books, making reading more affordable and sustainable.</p>
                <p>Unlike other platforms where selling used books yields almost nothing, we offer up to <strong>80% of the MRP</strong> based on the book’s condition. Our books are available at a discounted price ranging from <strong>6% to 50% of the MRP</strong>, making it easy for readers to own more books at a fraction of the cost.</p>
                <p>To enhance customer convenience, we offer <strong>free delivery</strong> on bulk orders and provide <strong>same-day delivery</strong> within Pune.</p>
            </div>
            <div class="about-image">
                <img src="{% static 'assets/img/freepik__a-happy-poor-kid-with-books__47838.jpeg' %}" alt="Second Chapter - Used Books">
            </div>
        </div>
</section>


<footer class="footer">
        <div class="footer-container">
            <div class="footer-about">
                <h3>Second Chapter</h3>
                <p>We buy and sell used books at affordable prices, making reading accessible to everyone. Get up to 80% of MRP when selling, and purchase books at discounts ranging from 6% to 50% of MRP.</p>
            </div>

            <div class="footer-links">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="{% url 'home' %}">Home</a></li>
                    <li><a href="{% url 'login' %}">Login</a></li>
                    <li><a href="{% url 'buybooks' %}">Buy Books</a></li>
                    <li><a href="#about">About</a></li>
                    <li><a href="{% url 'contact' %}">Contact</a></li>
                    <li><a href="#">View Profile</a></li>
                    <li><a href="{% url 'logout' %}">Logout</a></li>
                    <li><a href="#">Settings</a></li>
                </ul>

            </div>

            <div class="footer-contact">
                <h4>Contact Us</h4>
                <p>Email: <a href="mailto:support@secondchapter.com">support@secondchapter.com</a></p>
                <p>Phone: <a href="tel:+91XXXXXXXXXX">+91 XXXXXXXXXX</a></p>
                <p>Location: Pune, India</p>
            </div>
        </div>

        <div class="footer-bottom">
            <p>&copy; 2024 Second Chapter. All rights reserved.</p>
        </div>
</footer>


</body>

<script>
    // This script configures and opens the Razorpay payment popup when the button is clicked.
    var options = {
        "key": "{{ razorpay_key_id }}",
        "amount": "{{ amount }}",
        "currency": "INR",
        "name": "Second Chapter",
        "description": "Order Payment",
        "order_id": "{{ order_id }}",
        "callback_url": "{% url 'payment_success' %}", // This is the most important part for redirection
        "prefill": {
            "name": "{{ request.user.get_full_name|default:request.user.username }}",
            "email": "{{ request.user.email }}"
        },
        "theme": {
            "color": "#3399cc"
        }
    };

    var rzp = new Razorpay(options);

    // This attaches the payment popup to your button with the ID "rzp-button"
    document.getElementById('rzp-button').onclick = function(e){
        rzp.open();
        e.preventDefault();
    }
</script>


<script>
    // This script creates and manages the hamburger menu for smaller screens.
    document.addEventListener("DOMContentLoaded", function () {
        const nav = document.querySelector("nav");

        if (nav) {
            const menuToggle = document.createElement("div");

            menuToggle.innerHTML = `<span></span><span></span><span></span>`;
            menuToggle.classList.add("menu-toggle");

            nav.parentNode.insertBefore(menuToggle, nav);

            menuToggle.addEventListener("click", function () {
                nav.classList.toggle("active");
                menuToggle.classList.toggle("open");
            });
        }
    });
</script>

</html>
